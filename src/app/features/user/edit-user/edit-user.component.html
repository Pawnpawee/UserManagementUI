<div class="card h-100">
    <div class="card-header d-flex justify-content-between align-items-center py-3 bg-white">
        <h5 class="card-title mb-0 fw-bold">
            Edit User
        </h5>
        <button class="btn btn-light" (click)="closeModal()">
            <span class="mdi mdi-close"></span>
        </button>
    </div>

    <ng-container *ngIf="model">

        <form class="d-flex flex-column modal-content">
            <div class="col row px-3">
                <div class="mt-3 col-12 d-flex gap-2 align-items-center flex-nowrap">
                    <input type="text" class="form-control flex-grow-1" readonly id="userId" placeholder="User ID *"
                        name="userId" [(ngModel)]="model.userId">
                </div>


                <div class="mt-3 col-6">
                    <input type="text" class="form-control" id="firstName" placeholder="First Name *" name="firstName"
                        [(ngModel)]="model.firstName">
                </div>

                <div class="mt-3 col-6">
                    <input type="text" class="form-control" id="lastName" placeholder="Last Name *" name="lastName"
                        [(ngModel)]="model.lastName">
                </div>

                <div class="mt-3 col-4">
                    <input type="email" class="form-control" id="email" placeholder="Email ID*" name="email"
                        [(ngModel)]="model.email">
                </div>

                <div class="mt-3 col-4">
                    <input type="text" class="form-control" id="phone" placeholder="Mobile No." name="phone"
                        [(ngModel)]="model.phone">
                </div>


                <div class="mt-3 col-4">
                    <ng-container *ngIf="roles">
                        <select class="form-select" [(ngModel)]="selectedRole" name="roleId">
                            <option value="" disabled selected>Select Role Type</option>
                            <option *ngFor="let role of roles" [value]="role.roleId">
                                {{ role.roleName }}
                            </option>
                        </select>
                    </ng-container>
                </div>



                <div class="mt-3 col-4">
                    <input type="text" class="form-control" id="userName" placeholder="Username *" name="userName"
                        [(ngModel)]="model.userName">
                </div>

                <div class="mt-3 col-4">
                    <input type="password" class="form-control" id="password" placeholder="Password" name="password"
                        [(ngModel)]="newPassword">
                </div>

                <div class="mt-3 col-4">
                    <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm Password *"
                        name="confirmPassword" [(ngModel)]="confirmPassword" />
                    <div *ngIf="confirmPassword && !passwordsMatch()" class="text-danger mt-1">
                        Passwords do not match!
                    </div>
                </div>


            </div>


            <div class="table-responsiv mt-3">

                <table class="table align-middle mb-0">
                    <thead class="bg-verylightblue">
                        <tr>
                            <th class="text-secondary px-4 py-3 bg-transparent">Module Permission</th>
                            <th class="text-secondary px-4 py-3 bg-transparent text-center">Read</th>
                            <th class="text-secondary px-4 py-3 bg-transparent text-center">Write</th>
                            <th class="text-secondary px-4 py-3 bg-transparent text-center">Delete</th>
                        </tr>
                    </thead>
                    <tbody >

                        <!-- Row Start -->
                        <tr *ngFor="let permission of permissions ?? []; let i = index">
                            <td class="px-4 py-3">{{permission.permissionName}}</td>

                            <td class="px-4 py-3">
                                <div class=" d-flex justify-content-center">
                                    <input class="form-check-input" type="checkbox" [id]="'isReadable' + i"
                                        [(ngModel)]="selectedPermission[i].isReadable" name="isReadable{{i}}">
                                </div>
                            </td>

                            <td class="px-4 py-3">
                                <div class=" d-flex justify-content-center">
                                    <input class="form-check-input" type="checkbox" [id]="'isWritable' + i"
                                        [(ngModel)]="selectedPermission[i].isWritable" name="isWritable{{i}}">
                                </div>
                            </td>

                            <td class="px-4 py-3">
                                <div class=" d-flex justify-content-center">
                                    <input class="form-check-input" type="checkbox" [id]="'isDeletable' + i"
                                        [(ngModel)]="selectedPermission[i].isDeletable" name="isDeletable{{i}}">
                                </div>
                            </td>

                        </tr>


                    </tbody>
                </table>

            </div>

            <div class="border-top d-flex justify-content-end gap-3 p-3">
                <button class="btn btn-primary" type="submit" (click)="onUpdateSubmit()">
                    Add User
                </button>

                <button class="btn btn-light" (click)="closeModal()">
                    Cancle
                </button>
            </div>

        </form>

    </ng-container>


</div>